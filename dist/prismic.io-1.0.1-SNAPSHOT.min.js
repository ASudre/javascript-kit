/*! prismic.io 1.0.1-SNAPSHOT 2013-10-16 */
!function(a){"use strict";function b(a,b,c,d,e,f){this.name=a,this.fields=b,this.form_method=c,this.rel=d,this.enctype=e,this.action=f}function c(a,b,c){if(this.api=a,this.form=b,this.data=c||{},b.fields&&b.fields.q)for(var d in b.fields){var e=this.data[d];e||(this.data[d]=[]),"q"===d?this.query(b.fields[d].default):this.data[d].push(b.fields[d].default)}}function d(a){return this.fragments&&this.fragments[a]?Array.isArray(this.fragments[a])?this.fragments[a]:[this.fragments[a]]:[]}function e(a,b,c,d,e,f){this.id=a,this.type=b,this.href=c,this.tags=d,this.slug=e?e[0]:"-",this.fragments=f}function f(a,b,c){this.ref=a,this.label=b,this.isMaster=c}var g=function(a,b,c,d){var e=new g.fn.init(a,c,d);return b&&e.get(b),e},h=function(){return function(a,b){var c=new XMLHttpRequest,d=function(){b(JSON.parse(c.responseText))},e=function(){var a=c.status;throw new Error("Unexpected status code ["+a+"]")};c.onreadystatechange=function(){4===c.readyState&&(c.status&&200==c.status?d(c):e(c))},c.open("GET",a+"#json",!0),c.setRequestHeader("Accept","application/json"),c.send()}}();g.fn=g.prototype={constructor:g,data:null,get:function(a){var b=this;this.requestHandler(this.url,function(c){b.data=b.parse(c),b.bookmarks=b.data.bookmarks,a&&a(b,this)})},parse:function(a){var c,d,e,g,h,i={};for(h in a.forms)a.forms.hasOwnProperty(h)&&(g=a.forms[h],this.accessToken&&(g.fields.accessToken={type:"string","default":this.accessToken}),e=new b(g.name,g.fields,g.form_method,g.rel,g.enctype,g.action),i[h]=e);if(c=a.refs.map(function(a){return new f(a.ref,a.label,a.isMasterRef)})||[],d=c.filter(function(a){return a.isMaster===!0}),0===d.length)throw"No master ref.";return{bookmarks:a.bookmarks||{},refs:c,forms:i,master:d[0],oauthInitiate:a.oauth_initiate,oauthToken:a.oauth_token}},init:function(a,b,c){return this.url=a+(b?(a.indexOf("?")>-1?"&":"?")+"access_token="+b:""),this.accessToken=b,this.requestHandler=c||h,this},forms:function(a){return this.form(a)},form:function(a){var b=this.data.forms[a];return b?new c(this,b,{}):void 0},master:function(){return this.data.master.ref},ref:function(a){for(var b=0;b<this.data.refs.length;b++)if(this.data.refs[b].label==a)return this.data.refs[b].ref}},g.fn.init.prototype=g.fn,b.prototype={},c.prototype={ref:function(a){return this.data.ref=a,this},query:function(a){function b(a){return null==a?"":0===a.indexOf("[")&&a.lastIndexOf("]")===a.length-1?a.substring(1,a.length-1):a}return this.data.q=this.data.q||[],this.data.q.push(b(a)),this},submit:function(a){var b="["+this.data.q.join("")+"]",c=this.data.ref,d={ref:c};1===this.data.q.length&&""===this.data.q[0]||(d.q=b),this.data.accessToken&&this.data.accessToken.length&&(d.access_token=this.data.accessToken[0]);var f=this.form.action;if(d){var g=f.indexOf("?")>-1?"&":"?";for(var h in d)f+=g+h+"="+encodeURIComponent(d[h]),g="&"}this.api.requestHandler(f,function(b){var c=b.map(function(a){var b={};for(var c in a.data[a.type])b[a.type+"."+c]=a.data[a.type][c];return new e(a.id,a.type,a.href,a.tags,a.slugs,b)});a&&c.length&&a(c)})}},e.prototype={get:function(a){var b=d.call(this,a);return b.length?Prismic.Fragments.initField(b[0]):null},getAll:function(a){return d.call(this,a).map(function(a){return Prismic.Fragments.initField(a)},this)},getImage:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.Image?b:b instanceof Prismic.Fragments.StructuredText?b:null},getAllImages:function(a){var b=this.getAll(a);return b.map(function(a){if(a instanceof Prismic.Fragments.Image)return a;if(a instanceof Prismic.Fragments.StructuredText)throw new Error("Not done.");return null})},getImageView:function(a,b){var c=this.get(a);if(c instanceof Prismic.Fragments.Image)return c.getView(b);if(c instanceof Prismic.Fragments.StructuredText)for(var d=0;d<c.blocks.length;d++)if("image"==c.blocks[d].type)return c.blocks[d];return null},getAllImageViews:function(a,b){return this.getAllImages(a).map(function(a){return a.getView(b)})},getDate:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.Date?b.value:void 0},getBoolean:function(a){var b=this.get(a);return b.value&&("yes"==b.value.toLowerCase()||"on"==b.value.toLowerCase()||"true"==b.value.toLowerCase())},getText:function(a,b){var c=this.get(a);return c instanceof Prismic.Fragments.StructuredText?c.blocks.map(function(a){return a.text?a.text+(b?b:""):void 0}).join("\n"):c instanceof Prismic.Fragments.Text&&c.value?c.value+(b?b:""):c instanceof Prismic.Fragments.Number&&c.value?c.value+(b?b:""):c instanceof Prismic.Fragments.Select&&c.value?c.value+(b?b:""):c instanceof Prismic.Fragments.Color&&c.value?c.value+(b?b:""):void 0},getStructuredText:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.StructuredText?b:void 0},getNumber:function(a){var b=this.get(a);return b instanceof Prismic.Fragments.Number?b.value:void 0},getHtml:function(a,b){var c=this.get(a);return c&&c.asHtml?c.asHtml(b):void 0},asHtml:function(a){var b=[];for(var c in this.fragments){var d=this.get(c);b.push(d&&d.asHtml?'<section data-field="'+c+'">'+d.asHtml(a)+"</section>":"")}return b.join("")}},f.prototype={},a.Prismic={Api:g}}("object"==typeof exports&&exports?exports:"object"==typeof module&&module&&"object"==typeof module.exports?module.exports:window),function(a){"use strict";function b(a){this.value=a}function c(a){this.value=a,this.document=a.document,this.isBroken=a.isBroken}function d(a){this.value=a}function e(a){this.value=a}function f(a){this.value=a}function g(a){this.value=new Date(a)}function h(a){this.value=a}function i(a,b){this.main=a,this.views=b||{}}function j(a,b,c){this.url=a,this.width=b,this.height=c}function k(a,b){this.tag=a,this.blocks=b}function l(a){this.blocks=a}function m(a){var b,c=[],d=[];return Array.isArray(a)?(a.forEach(function(a){c.length>0?(c[c.length-1],b=new k(null,[]),b.blocks.push(a),c.push(b)):(b=new k(null,[]),b.blocks.push(a),c.push(b))}),c.forEach(function(a){a.tag?(d.push("<"+a.tag+">"),a.blocks.forEach(function(a){d.push(m(a))}),d.push("</"+a.tag+">")):a.blocks.forEach(function(a){d.push(m(a))})})):("heading1"==a.type&&d.push("<h1>"+a.text+"</h1>"),"heading2"==a.type&&d.push("<h2>"+a.text+"</h2>"),"heading3"==a.type&&d.push("<h3>"+a.text+"</h3>"),"paragraph"==a.type&&d.push("<p>"+a.text+"</p>"),"image"==a.type&&d.push('<p><img src="'+a.url+'"></p>')),d.join("")}function n(a){var h,k;switch(a.type){case"Color":h=new e(a.value);break;case"Number":h=new f(a.value);break;case"Date":h=new g(a.value);break;case"Text":h=new b(a.value);break;case"Embed":throw new Error("not implemented");case"Select":h=new d(a.value);break;case"Image":var k=a.value.main;h=new i(new j(k.url,k.dimensions.width,k.dimensions.height),a.value.views);break;case"StructuredText":h=new l(a.value);break;case"Link.document":h=new c(a.value);break;case"Link.web":throw new Error("not implemented");default:console.log("Type not found:",a.type)}return h}b.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},c.prototype={asHtml:function(){return"<a></a>"}},d.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},e.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},f.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},g.prototype={asText:function(){throw new Error("not implemented")},asHtml:function(){return"<time>"+this.value+"</time>"}},h.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}},i.prototype={getView:function(a){return"main"===a?this.main:this.views[a]},asHtml:function(){return this.main.asHtml()}},j.prototype={ratio:function(){return this.width/this.height},asHtml:function(){return"<img src="+this.url+" width="+this.width+" height="+this.height+">"}},l.prototype={getTitle:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if(0==b.type.indexOf("heading"))return b}},getFirstParagraph:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if("paragraph"==b.type)return b}},getFirstImage:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if("image"==b.type)return new j(b.data.url,b.data.dimensions.width,b.data.dimensions.height)}},asHtml:function(){return m.call(this,this.blocks)}},a.Fragments={Image:i,ImageView:j,Text:b,Number:f,Date:g,Select:d,Color:e,StructuredText:l,initField:n}}(window.Prismic);