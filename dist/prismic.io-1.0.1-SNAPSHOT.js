(function(k,q){function n(b,c,a,g,p,d){this.name=b;this.fields=c;this.form_method=a;this.rel=g;this.enctype=p;this.action=d}function l(b,c,a){this.api=b;this.form=c;this.data=a||{};if(c.fields&&c.fields.q)for(var g in c.fields)this.data[g]||(this.data[g]=[]),"q"===g?this.query(c.fields[g].default):this.data[g].push(c.fields[g].default)}function m(b,c,a){this.ref=b;this.label=c;this.isMaster=a}var f=function(b,c,a){b=new f.fn.init(b,a);c&&b.get(c);return b};f.fn=f.prototype={constructor:f,data:null,
get:function(b){var c=this;$.ajax({dataType:"json",url:this.url,success:function(a){c.data=c.parse(a);c.bookmarks=c.data.bookmarks;b&&b(c,this)}})},parse:function(b){var c,a,g={};for(c in b.forms)b.forms.hasOwnProperty(c)&&(a=b.forms[c],this.accessToken&&(a.fields.accessToken={type:"string",default:this.accessToken}),a=new n(a.name,a.fields,a.form_method,a.rel,a.enctype,a.action),g[c]=a);c=b.refs.map(function(a){return new m(a.ref,a.label,a.isMasterRef)})||[];a=c.filter(function(a){return!0===a.isMaster});
if(0===a.length)throw"No master ref.";return{bookmarks:b.bookmarks||{},refs:c,forms:g,master:a[0],oauthInitiate:b.oauth_initiate,oauthToken:b.oauth_token}},init:function(b,c){this.url=b+(c?(-1<b.indexOf("?")?"&":"?")+"access_token="+c:"");this.accessToken=c;return this},forms:function(b){return this.form(b)},form:function(b){if(b=this.data.forms[b])return new l(this,b,{})},master:function(){return this.data.master.ref}};f.fn.init.prototype=f.fn;n.prototype={};l.prototype={ref:function(b){this.data.ref=
b;return this},query:function(b){this.data.q=this.data.q||[];this.data.q.push(null==b?"":0===b.indexOf("[")&&b.lastIndexOf("]")===b.length-1?b.substring(1,b.length-1):b);return this},submit:function(b){var c="["+this.data.q.join("")+"]",a={ref:this.data.ref};if(1!==this.data.q.length||""!==this.data.q[0])a.q=c;this.data.accessToken&&this.data.accessToken.length&&(a.access_token=this.data.accessToken[0]);$.getJSON(this.form.action+"#json",a,function(a){a=a.map(function(a){var b={},e;for(e in a.data[a.type])b[a.type+
"."+e]=a.data[a.type][e];return new Doc(a.id,a.type,a.href,a.tags,a.slugs,b)});b&&a.length&&b(a)})}};(function(){function b(a){return this.fragments&&this.fragments[a]?Array.isArray(this.fragments[a])?this.fragments[a]:[this.fragments[a]]:[]}function c(a,b,c,d,e,r){this.id=a;this.type=b;this.href=c;this.tags=d;this.slug=e?e[0]:"-";this.fragments=r}c.prototype={get:function(a){a=b.call(this,a);return a.length?Prismic.Fragments.initField(a[0]):null},getAll:function(a){return b.call(this,a).map(function(a){return Prismic.Fragments.initField(a)},
this)},getImage:function(a){a=this.get(a);return a instanceof Prismic.Fragments.Image||a instanceof Prismic.Fragments.StructuredText?a:null},getAllImages:function(a){return this.getAll(a).map(function(a){if(a instanceof Prismic.Fragments.Image)return a;if(a instanceof Prismic.Fragments.StructuredText)throw Error("Not done.");return null})},getImageView:function(a,b){var c=this.get(a);if(c instanceof Prismic.Fragments.Image)return c.getView(b);if(c instanceof Prismic.Fragments.StructuredText)for(var d=
0;d<c.blocks.length;d++)if("image"==c.blocks[d].type)return c.blocks[d];return null},getAllImageViews:function(a,b){return this.getAllImages(a).map(function(a){return a.getView(b)})},getDate:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.Date)return a.value},getBoolean:function(a){a=this.get(a);return a.value&&("yes"==a.value.toLowerCase()||"on"==a.value.toLowerCase()||"true"==a.value.toLowerCase())},getText:function(a,b){var c=this.get(a);if(c instanceof Prismic.Fragments.StructuredText)return c.blocks.map(function(a){if(a.text)return a.text+
(b?b:"")}).join("\n");if(c instanceof Prismic.Fragments.Text&&c.value||c instanceof Prismic.Fragments.Number&&c.value||c instanceof Prismic.Fragments.Select&&c.value||c instanceof Prismic.Fragments.Color&&c.value)return c.value+(b?b:"")},getStructuredText:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.StructuredText)return a},getNumber:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.Number)return a.value},getHtml:function(a,b){var c=this.get(a);if(c&&c.asHtml)return c.asHtml(b)},
asHtml:function(a){var b=[],c;for(c in this.fragments){var d=this.get(c);b.push(d&&d.asHtml?'<section data-field="'+c+'">'+d.asHtml(a)+"</section>":"")}return b.join("")}};k.Doc=c})();m.prototype={};"object"===typeof k&&"object"===typeof k.document&&(k.Prismic={Api:f})})(window);(function(k){function q(a){this.value=a}function n(a){this.value=a;this.document=a.document;this.isBroken=a.isBroken}function l(a){this.value=a}function m(a){this.value=a}function f(a){this.value=a}function b(a){this.value=new Date(a)}function c(a,b){this.main=a;this.views=b||{}}function a(a,b,c){this.url=a;this.width=b;this.height=c}function g(a,b){this.tag=a;this.blocks=b}function p(a){this.blocks=a}function d(a,b){var c=[],f,h=[];Array.isArray(a)?(a.forEach(function(a){f=new g(null,[]);f.blocks.push(a);
c.push(f)}),c.forEach(function(a){a.tag?(h.push("<"+a.tag+">"),a.blocks.forEach(function(a){h.push(d(a))}),h.push("</"+a.tag+">")):a.blocks.forEach(function(a){h.push(d(a))})})):("heading1"==a.type&&h.push("<h1>"+a.text+"</h1>"),"heading2"==a.type&&h.push("<h2>"+a.text+"</h2>"),"heading3"==a.type&&h.push("<h3>"+a.text+"</h3>"),"paragraph"==a.type&&h.push("<p>"+a.text+"</p>"),"image"==a.type&&h.push('<p><img src="'+a.url+'"></p>'));return h.join("")}q.prototype={asHtml:function(){return"<span>"+this.value+
"</span>"}};n.prototype={asHtml:function(){return"BOUH"}};l.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};m.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};f.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};b.prototype={asText:function(a){throw Error("not implemented");},asHtml:function(){return"<time>"+this.value+"</time>"}};c.prototype={getView:function(a){return"main"===a?this.main:this.views[a]},asHtml:function(){return this.main.asHtml()}};
a.prototype={ratio:function(){return this.width/this.height},asHtml:function(){return"<img src="+this.url+" width="+this.width+" height="+this.height+">"}};p.prototype={getTitle:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if(0==b.type.indexOf("heading"))return b}},getFirstParagraph:function(){for(var a=0;a<this.blocks.length;a++){var b=this.blocks[a];if("paragraph"==b.type)return b}},getParagraphs:function(){for(var a=[],b=0;b<this.blocks.length;b++){var c=this.blocks[b];
"paragraph"==c.type&&a.push(c)}return a},getParagraph:function(a){return this.getParagraphs()[a]},getFirstImage:function(){},asHtml:function(){return d.call(this,this.blocks)}};k.Fragments={Image:c,ImageView:a,Text:q,Number:f,Date:b,Select:l,Color:m,StructuredText:p,initField:function(e){var d;switch(e.type){case "Color":d=new m(e.value);break;case "Number":d=new f(e.value);break;case "Date":d=new b(e.value);break;case "Text":d=new q(e.value);break;case "Embed":throw Error("not implemented");case "Select":d=
new l(e.value);break;case "Image":d=e.value.main;d=new c(new a(d.url,d.dimensions.width,d.dimensions.height),e.value.views);break;case "StructuredText":d=new p(e.value);break;case "Link.document":d=new n(e.value);break;case "Link.web":throw Error("not implemented");default:console.log("Type not found:",e.type)}return d}}})(window.Prismic);
