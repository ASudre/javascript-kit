(function(h){function n(a){this.value=a}function m(a){this.value=a;this.document=a.document;this.isBroken=a.isBroken}function k(a){this.value=a}function l(a){this.value=a}function e(a){this.value=a}function b(a){this.value=new Date(a)}function c(a,d){this.main=a;this.views=d||{}}function a(a,d,b){this.url=a;this.width=d;this.height=b}function f(a,d){this.tag=a;this.blocks=d}function d(a){this.blocks=a}function g(a,d){var b=[],c,e=[];Array.isArray(a)?(a.forEach(function(a){c=new f(null,[]);c.blocks.push(a);
b.push(c)}),b.forEach(function(a){a.tag?(e.push("<"+a.tag+">"),a.blocks.forEach(function(a){e.push(g(a))}),e.push("</"+a.tag+">")):a.blocks.forEach(function(a){e.push(g(a))})})):("heading1"==a.type&&e.push("<h1>"+a.text+"</h1>"),"heading2"==a.type&&e.push("<h2>"+a.text+"</h2>"),"heading3"==a.type&&e.push("<h3>"+a.text+"</h3>"),"paragraph"==a.type&&e.push("<p>"+a.text+"</p>"),"image"==a.type&&e.push('<p><img src="'+a.url+'"></p>'));return e.join("")}n.prototype={asHtml:function(){return"<span>"+this.value+
"</span>"}};m.prototype={asHtml:function(){return"BOUH"}};k.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};l.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};e.prototype={asHtml:function(){return"<span>"+this.value+"</span>"}};b.prototype={asText:function(a){throw Error("not implemented");},asHtml:function(){return"<time>"+this.value+"</time>"}};c.prototype={getView:function(a){return"main"===a?this.main:this.views[a]},asHtml:function(){return this.main.asHtml()}};
a.prototype={ratio:function(){return this.width/this.height},asHtml:function(){return"<img src="+this.url+" width="+this.width+" height="+this.height+">"}};d.prototype={getTitle:function(){for(var a=0;a<this.blocks.length;a++){var d=this.blocks[a];if(0==d.type.indexOf("heading"))return d}},getFirstParagraph:function(){for(var a=0;a<this.blocks.length;a++){var d=this.blocks[a];if("paragraph"==d.type)return d}},getParagraphs:function(){for(var a=[],d=0;d<this.blocks.length;d++){var b=this.blocks[d];
"paragraph"==b.type&&a.push(b)}return a},getParagraph:function(a){return this.getParagraphs()[a]},getFirstImage:function(){},asHtml:function(){return g.call(this,this.blocks)}};h.Fragments={Image:c,ImageView:a,Text:n,Number:e,Date:b,Select:k,Color:l,StructuredText:d,initField:function(f){var g;switch(f.type){case "Color":g=new l(f.value);break;case "Number":g=new e(f.value);break;case "Date":g=new b(f.value);break;case "Text":g=new n(f.value);break;case "Embed":throw Error("not implemented");case "Select":g=
new k(f.value);break;case "Image":g=f.value.main;g=new c(new a(g.url,g.dimensions.width,g.dimensions.height),f.value.views);break;case "StructuredText":g=new d(f.value);break;case "Link.document":g=new m(f.value);break;case "Link.web":throw Error("not implemented");default:console.log("Type not found:",f.type)}return g}}})(window.Prismic);(function(h,n){function m(b,c,a,f,d,g){this.name=b;this.fields=c;this.form_method=a;this.rel=f;this.enctype=d;this.action=g}function k(b,c,a){this.api=b;this.form=c;this.data=a||{};if(c.fields&&c.fields.q)for(var f in c.fields)this.data[f]||(this.data[f]=[]),"q"===f?this.query(c.fields[f].default):this.data[f].push(c.fields[f].default)}function l(b,c,a){this.ref=b;this.label=c;this.isMaster=a}var e=function(b,c,a){b=new e.fn.init(b,a);c&&b.get(c);return b};e.fn=e.prototype={constructor:e,data:null,
get:function(b){var c=this;$.ajax({dataType:"json",url:this.url,success:function(a){c.data=c.parse(a);c.bookmarks=c.data.bookmarks;b&&b(c,this)}})},parse:function(b){var c,a,f={};for(c in b.forms)b.forms.hasOwnProperty(c)&&(a=b.forms[c],this.accessToken&&(a.fields.accessToken={type:"string",default:this.accessToken}),a=new m(a.name,a.fields,a.form_method,a.rel,a.enctype,a.action),f[c]=a);c=b.refs.map(function(a){return new l(a.ref,a.label,a.isMasterRef)})||[];a=c.filter(function(a){return!0===a.isMaster});
if(0===a.length)throw"No master ref.";return{bookmarks:b.bookmarks||{},refs:c,forms:f,master:a[0],oauthInitiate:b.oauth_initiate,oauthToken:b.oauth_token}},init:function(b,c){this.url=b+(c?(-1<b.indexOf("?")?"&":"?")+"access_token="+c:"");this.accessToken=c;return this},forms:function(b){return this.form(b)},form:function(b){if(b=this.data.forms[b])return new k(this,b,{})},master:function(){return this.data.master.ref}};e.fn.init.prototype=e.fn;m.prototype={};k.prototype={ref:function(b){this.data.ref=
b;return this},query:function(b){this.data.q=this.data.q||[];this.data.q.push(null==b?"":0===b.indexOf("[")&&b.lastIndexOf("]")===b.length-1?b.substring(1,b.length-1):b);return this},submit:function(b){var c="["+this.data.q.join("")+"]",a={ref:this.data.ref};if(1!==this.data.q.length||""!==this.data.q[0])a.q=c;this.data.accessToken&&this.data.accessToken.length&&(a.access_token=this.data.accessToken[0]);$.getJSON(this.form.action+"#json",a,function(a){a=a.map(function(a){var b={},f;for(f in a.data[a.type])b[a.type+
"."+f]=a.data[a.type][f];return new Doc(a.id,a.type,a.href,a.tags,a.slugs,b)});b&&a.length&&b(a)})}};(function(){function b(a){return this.fragments&&this.fragments[a]?Array.isArray(this.fragments[a])?this.fragments[a]:[this.fragments[a]]:[]}function c(a,b,d,c,e,h){this.id=a;this.type=b;this.href=d;this.tags=c;this.slug=e?e[0]:"-";this.fragments=h}c.prototype={get:function(a){a=b.call(this,a);return a.length?Prismic.Fragments.initField(a[0]):null},getAll:function(a){return b.call(this,a).map(function(a){return Prismic.Fragments.initField(a)},
this)},getImage:function(a){a=this.get(a);return a instanceof Prismic.Fragments.Image||a instanceof Prismic.Fragments.StructuredText?a:null},getAllImages:function(a){return this.getAll(a).map(function(a){if(a instanceof Prismic.Fragments.Image)return a;if(a instanceof Prismic.Fragments.StructuredText)throw Error("Not done.");return null})},getImageView:function(a,b){var d=this.get(a);if(d instanceof Prismic.Fragments.Image)return d.getView(b);if(d instanceof Prismic.Fragments.StructuredText)for(var c=
0;c<d.blocks.length;c++)if("image"==d.blocks[c].type)return d.blocks[c];return null},getAllImageViews:function(a,b){return this.getAllImages(a).map(function(a){return a.getView(b)})},getDate:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.Date)return a.value},getBoolean:function(a){a=this.get(a);return a.value&&("yes"==a.value.toLowerCase()||"on"==a.value.toLowerCase()||"true"==a.value.toLowerCase())},getText:function(a,b){var c=this.get(a);if(c instanceof Prismic.Fragments.StructuredText)return c.blocks.map(function(a){if(a.text)return a.text+
(b?b:"")}).join("\n");if(c instanceof Prismic.Fragments.Text&&c.value||c instanceof Prismic.Fragments.Number&&c.value||c instanceof Prismic.Fragments.Select&&c.value||c instanceof Prismic.Fragments.Color&&c.value)return c.value+(b?b:"")},getStructuredText:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.StructuredText)return a},getNumber:function(a){a=this.get(a);if(a instanceof Prismic.Fragments.Number)return a.value},getHtml:function(a,b){var c=this.get(a);if(c&&c.asHtml)return c.asHtml(b)},
asHtml:function(a){var b=[],c;for(c in this.fragments){var e=this.get(c);b.push(e&&e.asHtml?'<section data-field="'+c+'">'+e.asHtml(a)+"</section>":"")}return b.join("")}};h.Doc=c})();l.prototype={};"object"===typeof h&&"object"===typeof h.document&&(h.Prismic={Api:e})})(window);
